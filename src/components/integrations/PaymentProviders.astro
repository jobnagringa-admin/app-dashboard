---
/**
 * PaymentProviders.astro
 *
 * Payment Integration Configuration
 *
 * Payment Providers Identified:
 * 1. Stripe (via Webflow Commerce)
 * 2. PayPal (via Webflow Commerce)
 * 3. Apple Pay (via Webflow Commerce)
 * 4. Nova Money API (custom payment API)
 * 5. Stripe Direct (for subscription links)
 *
 * Environment Variables Required:
 * - PUBLIC_STRIPE_PUBLISHABLE_KEY: Stripe publishable key
 * - PUBLIC_NOVA_MONEY_API_URL: Nova Money API URL
 * - STRIPE_SECRET_KEY: Stripe secret key (server-side only)
 *
 * Migration Notes:
 *
 * 1. WEBFLOW COMMERCE (Stripe/PayPal Integration)
 *    - Original uses Webflow's built-in e-commerce
 *    - Stripe Elements for card input (data-wf-stripe-element-type)
 *    - PayPal checkout page at /paypal-checkout
 *    - Apple Pay button support
 *    - Requires Webflow Commerce plan to function
 *
 * 2. NOVA MONEY API
 *    - Custom payment API at jobnagringa.pay.nova.money
 *    - Production: https://jobnagringa.pay.nova.money/api/v1
 *    - Staging: https://jobnagringa.staging.pay.nova.money/api/v1
 *    - Used for Brazilian payment methods
 *
 * 3. STRIPE DIRECT LINKS
 *    - Checkout links: https://buy.stripe.com/cN27tEbEd1DX3qocMS
 *    - Used for direct subscription purchases
 *    - Bypasses Webflow Commerce
 *
 * 4. HOTMART (Affiliate)
 *    - Affiliate page at /afiliado-hotmart
 *    - No direct payment integration
 *    - Redirects to Hotmart platform
 *
 * ASTRO MIGRATION APPROACH:
 *
 * Option A: Keep Webflow Commerce
 * - Embed checkout pages as iframes
 * - Limited control over UI/UX
 *
 * Option B: Direct Stripe Integration
 * - Use @stripe/stripe-js for client-side
 * - Use stripe npm package for server-side
 * - Full control over checkout flow
 * - Recommended for custom checkout
 *
 * Option C: Stripe Payment Links
 * - Use existing buy.stripe.com links
 * - Simplest migration path
 * - Limited customization
 */

interface Props {
  /**
   * Nova Money API environment
   * @default 'production'
   */
  environment?: 'production' | 'staging';
}

const { environment = 'production' } = Astro.props;

// API URLs
const novaMoneyUrl =
  environment === 'production'
    ? import.meta.env.PUBLIC_NOVA_MONEY_API_URL || 'https://jobnagringa.pay.nova.money/api/v1'
    : 'https://jobnagringa.staging.pay.nova.money/api/v1';

// Stripe publishable key
const stripeKey = import.meta.env.PUBLIC_STRIPE_PUBLISHABLE_KEY;
---

<!-- Payment API Configuration -->
<script is:inline define:vars={{ novaMoneyUrl }}>
  // Nova Money API configuration
  window.API_URL = novaMoneyUrl;
</script>

<!-- Stripe.js (optional - uncomment if using direct Stripe integration) --><!--
<script async src="https://js.stripe.com/v3/"></script>
<script is:inline define:vars={{ stripeKey }}>
  if (typeof Stripe !== 'undefined' && stripeKey) {
    window.stripe = Stripe(stripeKey);
  }
</script>
-->
