---
/**
 * FinsweetCMS.astro
 *
 * Finsweet Attributes for Webflow CMS
 *
 * Purpose:
 * - CMS Load: Infinite scroll and pagination for CMS collections
 * - CMS Filter: Client-side filtering of CMS items
 * - CMS Sort: Client-side sorting of CMS items
 *
 * CDN Resources:
 * - @finsweet/attributes-cmsload@1
 * - @finsweet/attributes-cmsfilter@1
 *
 * Environment Variables Required:
 * - None (uses jsDelivr CDN)
 *
 * Migration Notes:
 * - Original uses jsDelivr CDN for Finsweet scripts
 * - These are Webflow-specific and may need alternatives in Astro
 * - Consider using native Astro pagination and filtering instead
 * - For SSG/SSR, server-side filtering is preferred
 *
 * Astro Alternatives:
 * - Use Astro's built-in pagination: getStaticPaths with paginate()
 * - Use collection-based filtering in getStaticPaths
 * - For dynamic filtering, consider React/Vue components
 */

interface Props {
  /**
   * Enable CMS Load (infinite scroll/pagination)
   * @default true
   */
  enableCmsLoad?: boolean;

  /**
   * Enable CMS Filter (client-side filtering)
   * @default true
   */
  enableCmsFilter?: boolean;

  /**
   * Enable CMS Sort (client-side sorting)
   * @default false
   */
  enableCmsSort?: boolean;
}

const {
  enableCmsLoad = true,
  enableCmsFilter = true,
  enableCmsSort = false
} = Astro.props;

const cmsLoadUrl = 'https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmsload@1/cmsload.js';
const cmsFilterUrl = 'https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmsfilter@1/cmsfilter.js';
const cmsSortUrl = 'https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmssort@1/cmssort.js';
---

<div class="embed_finsweet w-embed w-script">
  {/* Finsweet CMS Load */}
  {enableCmsLoad && (
    <>
      <!-- [Attributes by Finsweet] CMS Load -->
      <script async src={cmsLoadUrl}></script>
    </>
  )}

  {/* Finsweet CMS Filter */}
  {enableCmsFilter && (
    <>
      <!-- [Attributes by Finsweet] CMS Filter -->
      <script async src={cmsFilterUrl}></script>
    </>
  )}

  {/* Finsweet CMS Sort */}
  {enableCmsSort && (
    <>
      <!-- [Attributes by Finsweet] CMS Sort -->
      <script async src={cmsSortUrl}></script>
    </>
  )}
</div>
