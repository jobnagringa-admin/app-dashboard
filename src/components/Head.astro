---
/**
 * Head Component - Common meta tags, scripts, and styles for all pages
 *
 * @prop {string} title - Page title
 * @prop {string} description - Meta description
 * @prop {string} ogTitle - Open Graph title (defaults to title)
 * @prop {string} ogDescription - Open Graph description (defaults to description)
 * @prop {string} ogImage - Open Graph image URL
 * @prop {boolean} noIndex - Whether to add noindex meta tag
 * @prop {string} lang - HTML lang attribute (defaults to pt-BR)
 */

interface Props {
  title: string;
  description?: string;
  ogTitle?: string;
  ogDescription?: string;
  ogImage?: string;
  noIndex?: boolean;
  lang?: string;
}

const {
  title,
  description = '',
  ogTitle,
  ogDescription,
  ogImage = 'https://cdn.prod.website-files.com/642953c962519376c853ab81/66fa20663b706c601554155b_og-image-jng.jpg',
  noIndex = false,
  lang = 'pt-BR',
} = Astro.props;

const finalOgTitle = ogTitle || title;
const finalOgDescription = ogDescription || description;
---

<meta charset="utf-8" />
<title>{title}</title>
{description && <meta content={description} name="description" />}
<meta content={finalOgTitle} property="og:title" />
{finalOgDescription && <meta content={finalOgDescription} property="og:description" />}
<meta content={ogImage} property="og:image" />
<meta content={finalOgTitle} property="twitter:title" />
{finalOgDescription && <meta content={finalOgDescription} property="twitter:description" />}
<meta content={ogImage} property="twitter:image" />
<meta property="og:type" content="website" />
<meta content="summary_large_image" name="twitter:card" />
<meta content="width=device-width, initial-scale=1" name="viewport" />

<!-- Preconnect to critical third-party origins (improves LCP) -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link rel="preconnect" href="https://www.googletagmanager.com" />
<link rel="preconnect" href="https://clerk.jobnagringa.com.br" crossorigin />

<!-- DNS prefetch for non-critical origins -->
<link rel="dns-prefetch" href="https://d3e54v103j8qbb.cloudfront.net" />
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
<link rel="dns-prefetch" href="https://analytics.ahrefs.com" />
<link rel="dns-prefetch" href="https://mautic.jobnagringa.com.br" />

<!-- Stylesheets -->
<link href="/css/normalize.css" rel="stylesheet" type="text/css" />
<link href="/css/webflow.css" rel="stylesheet" type="text/css" />
<link href="/css/jobnagringa.webflow.css" rel="stylesheet" type="text/css" />

<!-- Favicon (moved up for faster display) -->
<link href="/images/favicon.jpg" rel="shortcut icon" type="image/x-icon" />
<link href="/images/webclip.jpg" rel="apple-touch-icon" />

<!--
  Font Loading Strategy:
  - Use CSS font-display: swap via Google Fonts URL parameter
  - Load fonts asynchronously to avoid render-blocking
-->
<link
  rel="preload"
  href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
/>
<noscript
  ><link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
  /></noscript
>

<!-- Webflow touch detection (critical - runs synchronously but is tiny) -->
<script is:inline>
  !(function (o, c) {
    var n = c.documentElement,
      t = ' w-mod-';
    ((n.className += t + 'js'),
      ('ontouchstart' in o || (o.DocumentTouch && c instanceof DocumentTouch)) &&
        (n.className += t + 'touch'));
  })(window, document);
</script>

<!-- Custom error/validation styles -->
<style>
  .hide {
    display: none;
  }
  .error {
    border: 1px red solid;
  }
  .success {
    border: 1px #0acf0a solid;
  }
  .error-message {
    font-size: 12px;
    color: red;
    margin-top: -8px;
  }
</style>

{noIndex && <meta name="robots" content="noindex" />}

<slot />
