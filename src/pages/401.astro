---
/**
 * 401 Protected Page
 *
 * Password-protected page form from Webflow.
 * Users enter a password to access protected content.
 */

import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout
  title="Pagina Protegida"
  noIndex={true}
  includeNavigation={false}
  includeFooter={false}
  bodyClass=""
>
  <div class="utility_section">
    <div class="utility_container w-password-page w-form">
      <form
        action="/.wf_auth"
        method="post"
        id="email-form"
        name="email-form"
        data-name="Email Form"
        class="utility_container w-password-page"
      >
        <div class="text-size-large text-weight-semibold">Pagina Protegida</div>
        <div class="spacer-small"></div>
        <label for="pass" class="display-hidden w-password-page">Senha</label>
        <input
          class="input_field w-password-page w-input"
          autofocus
          maxlength="256"
          name="pass"
          data-name="field"
          placeholder="Digite a senha aqui"
          type="password"
          id="pass"
        />
        <div class="spacer-small"></div>
        <input
          type="submit"
          data-wait="Please wait..."
          class="button w-password-page w-button"
          value="Tente a Sorte"
        />
        <div class="error_wrapper w-password-page w-form-fail">
          <div class="component_tooltip is-error-block">Nao foi dessa vez. Tente novamente.</div>
        </div>
      </form>
    </div>
  </div>
</BaseLayout>

<script is:inline>
  // Handle password page error display
  (function _handlePasswordPageOnload() {
    if (/[?&]e=1(&|$)/.test(document.location.search)) {
      const failEl = document.querySelector('.w-password-page.w-form-fail');
      if (failEl) {
        failEl.style.display = 'block';
      }
    }
  })();
</script>

<style>
  .utility_section {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 2rem;
    background-color: var(--neutrals--neutral-100, #f5f5f5);
  }

  .utility_container {
    text-align: center;
    max-width: 400px;
    padding: 2rem;
    background: white;
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .input_field {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid var(--neutrals--neutral-300, #ccc);
    border-radius: 0.25rem;
    font-size: 1rem;
  }

  .display-hidden {
    display: none;
  }

  .error_wrapper {
    display: none;
    margin-top: 1rem;
  }

  .is-error-block {
    color: red;
    font-size: 0.875rem;
  }
</style>
