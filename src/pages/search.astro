---
/**
 * Search Results Page
 *
 * Simple search form for site-wide search functionality.
 */

import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout
  title="Busca - #jobnagringa"
  description="Busque vagas, artigos e conteudo no #jobnagringa"
  includeNavigation={true}
  includeFooter={true}
  bodyClass=""
>
  <div class="padding-global">
    <div class="container-medium">
      <div class="spacer-xlarge"></div>

      <div class="search-page_container">
        <h1 class="heading-style-h2">Resultados da busca</h1>
        <div class="spacer-medium"></div>

        <div class="w-form">
          <form
            id="search-form"
            name="search-form"
            action="/search"
            method="get"
            class="search-form"
          >
            <div class="search-input_wrapper">
              <input
                class="input_field w-input"
                maxlength="256"
                name="query"
                placeholder="O que voce esta buscando?"
                type="search"
                id="search-query"
                required
              />
              <input type="submit" class="button w-button" value="Buscar" />
            </div>
          </form>
        </div>

        <div class="spacer-large"></div>

        <!-- Search results will be dynamically loaded here -->
        <div id="search-results" class="search-results">
          <p class="text-color-muted text-align-center">Digite um termo acima para buscar.</p>
        </div>
      </div>

      <div class="spacer-xlarge"></div>
    </div>
  </div>
</BaseLayout>

<script is:inline>
  // Get query from URL and populate input
  document.addEventListener('DOMContentLoaded', function () {
    const urlParams = new URLSearchParams(window.location.search);
    const query = urlParams.get('query');

    if (query) {
      const input = document.getElementById('search-query');
      if (input) {
        input.value = query;
      }

      // Show searching message
      const resultsContainer = document.getElementById('search-results');
      if (resultsContainer) {
        resultsContainer.innerHTML =
          '<p class="text-color-muted text-align-center">Buscando por: <strong>' +
          query +
          '</strong></p>';
      }
    }
  });
</script>

<style>
  .search-page_container {
    max-width: 800px;
    margin: 0 auto;
  }

  .search-form {
    width: 100%;
  }

  .search-input_wrapper {
    display: flex;
    gap: 1rem;
  }

  .search-input_wrapper .input_field {
    flex: 1;
  }

  .search-results {
    min-height: 200px;
  }

  .text-align-center {
    text-align: center;
  }
</style>
